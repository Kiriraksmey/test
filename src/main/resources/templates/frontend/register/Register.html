<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout-frontend/frontend-layout}">

<head>
    <meta charset="utf-8">

    <meta th:name="_csrf" th:content="${_csrf.token}"/>
    <meta th:name="_csrf_header" th:content="${_csrf.headerName}"/>

    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>ZenBlog Bootstrap Template - Index</title>
    <meta content="" name="description">
    <meta content="" name="keywords">
    <link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css}"/>
    <!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>-->
    <!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />-->
    <!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>`-->

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- select2 -->
    <!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet"/>-->

    <!--    &lt;!&ndash; select2-bootstrap4-theme &ndash;&gt;-->
    <!--    <link href="https://raw.githack.com/ttskch/select2-bootstrap4-theme/master/dist/select2-bootstrap4.css"-->
    <!--          rel="stylesheet"> &lt;!&ndash; for live demo page &ndash;&gt;-->
    <!--    <link href="select2-bootstrap4.css" rel="stylesheet"> &lt;!&ndash; for local development env &ndash;&gt;-->

    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/css/select2.min.css"/>
    <link rel="stylesheet" type="text/css"
          href="https://select2.github.io/select2-bootstrap-theme/css/select2-bootstrap.css">
    <link href='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css'>

    <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js'>
    </script>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'>
    </script>


    <style>
        select {
            width: 100%;
            min-height: 100px;
            border-radius: 3px;
            border: 1px solid #444;
            padding: 10px;
            color: #444444;
            font-size: 14px;
        }

        #list-course:hover {
            background-color: #3acf87;

        }


    </style>
</head>
<body>

<section layout:fragment="content">
    <div class="container" style="display: flex ; justify-content: center"  >

        <!-- multistep form -->
            <div class="row">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-11 col-sm-9 col-md-7
col-lg-6 col-xl-5 text-center p-0 mt-3 mb-2">

                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12" style="position: relative">
                    <div class="msform">
                        <!-- progressbar -->
                        <!--                    <ul id="progressbar">-->
                        <!--                        <li class="active">Account Setup</li>-->
                        <!--                        <li>Social Profiles</li>-->
                        <!--                        <li>Personal Details</li>-->
                        <!--                    </ul>-->
                        <!-- fieldsets -->
                        <div th:if="${responseBody.errorCode == '01'}">
                            <div class="alert alert-danger">Email is already exists, Please try another email.</div>
                        </div>
                        <form th:action="@{/savePaymentRegister}" th:object="${PaymentUser}" method="POST" >
                            <h2 class="fs-title">Admission Information</h2>

                            <h2 id="transactionId" class="fs-title" >Your Code Transation:</h2>
                            <input type="text" name="userName" id="userName" placeholder="Name" required />
                            <input type="password" name="password" id="password" placeholder="Password" required />
                            <input type="email" name="email" id="email" placeholder="Email" required/>
                            <input type="text" name="phoneNumber" id="phoneNumber" placeholder="Phone Number" oninput="this.value=this.value.replace(/[^0-9]/g, '')" required/>

                            <div class="col-md-12 col-lg-12">
                                <button type="submit" class="btn btn-primary">submit</button>
<!--                                <input type="submit"  value="Submit">-->
                            </div>
                            <div class="col-md-12 col-lg-12">
                                <p>Already have an account? <a th:href="@{/login}"> Log In</a></p>
                            </div>
                            <div class="form-group" style="position: absolute;top: 37px;right: -340px;width: 300px;height: 20px" >
                                <label>Course</label>
                                <select multiple class="form-control select2_multi" placeholder="Choose Course"
                                        id="course_id"
                                        data-allow-clear="1" th:name="courseId" action="/action_page.php">
                                    <option   th:each="course: ${courses}" th:value="${course.id}"
                                            th:text="${course.courseName}"  ></option>
                                </select>
                            </div>
                            <div class="form-group" style="position: absolute;top: 130px;right: -250px">
                                <label>Total Price</label>
                                <input type="text" class="form-control" id="totalPrice" th:name="totalPrice"
                                       placeholder="Total price" readonly/>
                            </div>
                        </form>

                    </div>
                </div>
<!--                <div class="col-lg-6 col-md-6 col-sm-12">-->
<!--                    &lt;!&ndash; multistep form &ndash;&gt;-->
<!--                    <div class="msform">-->
<!--                        <form style="height: 350px">-->
<!--                           -->
<!--                        </form>-->
<!--                    </div>-->
<!--                </div>-->



            </div>
    </div>
</section>

<section layout:fragment="script">
    <!--    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"-->
    <!--            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"-->
    <!--            crossorigin="anonymous"></script>-->
    <!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"-->
    <!--            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"-->
    <!--            crossorigin="anonymous"></script>-->
    <!--    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"-->
    <!--            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"-->
    <!--            crossorigin="anonymous"></script>-->
    <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/js/select2.min.js"></script>
    <!--    <script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js}"></script>-->
    <!--    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>-->


    <script type="text/javascript">



        $("#course_id").change(function (e) {

            var data = {};
            data["courseId"] = $(this).val();
            console.log(data);
            var token = $("meta[name='_csrf']").attr("content");
            var header = $("meta[name='_csrf_header']").attr("content");
            $.ajax({
                type: "POST",
                contentType: "application/json",
                url: "/api/getCourseTotalPrice",
                beforeSend: function(xhr) {
                    xhr.setRequestHeader(header, token)
                },
                data: JSON.stringify(data),

                dataType: 'json',
                cache: false,
                timeout: 600000,
                success: function (data) {

                    $("#totalPrice").val(data.amount);
                },
                error: function (e) {
                    console.log("ERROR : ", e);
                    $("#btn-search").prop("disabled", false);

                }
            });

        });


        // function voteViaAjax() {
        //     var vote = {"courseId" : $(this).val()};
        //     var token = $("meta[name='_csrf']").attr("content");
        //     var header = $("meta[name='_csrf_header']").attr("content");
        //
        //     $.ajax({
        //         type : "POST",
        //         contentType : "application/json",
        //         beforeSend: function(xhr) {
        //             xhr.setRequestHeader(header, token)
        //         },
        //         url : "/api/getCourseTotalPrices",
        //         data : JSON.stringify(vote),
        //         dataType : 'json',
        //         timeout : 100000,
        //         success : function(data) {
        //             console.log("SUCCESS: ", data);
        //             $('#info').html(data);
        //         },
        //         error : function(e) {
        //             console.log("ERROR: ", e);
        //
        //         },
        //         done : function(e) {
        //             console.log("DONE");
        //         }
        //     });


        /*
                $("#course_id").change(function (e) {
                    // var course_id = $(this).val();
                    var data = {};
                    data["courseId"] = $(this).val();
                    console.log(data);
                    $.ajax({


                        type: "DELETE",
                        contentType: "application/json",
                        url: "/api/getCourseTotalPrices",
                        data: JSON.stringify(data),
                         // data : {
                         //     "courseIdStr" : $(this).val()
                         // },
                        dataType: 'json',
                        cache: false,
                        timeout: 600000,
                        success: function (data) {

                            // var json = "<h4>Ajax Response</h4>&lt;pre&gt;"
                            //     + JSON.stringify(data, null, 4) + "&lt;/pre&gt;";
                            // $('#feedback').html(json);
                            $("#totalPrice").val(data.amount);
                            console.log("logs : ", data);
                            // $("#btn-search").prop("disabled", false);

                        },
                        error: function (e) {
                            var json = "<h4>Ajax Response</h4>&lt;pre&gt;"
                                + e.responseText + "&lt;/pre&gt;";
                            $('#feedback').html(json);

                            console.log("ERROR : ", e);
                            $("#btn-search").prop("disabled", false);

                        }
                    });

                });
        */
        // function getCourse(e){
        //     // var val = $(e).val();
        //     console.log(e);
        // }
        function getOption() {
            selectElement = document.querySelector('#select1');
            output = selectElement.value;
            document.querySelector('.output').textContent = output;
        }

        // $(function () {
        //     $('select').each(function () {
        //         $(this).select2({
        //             theme: 'bootstrap4',
        //             width: 'style',
        //             placeholder: $(this).attr('placeholder'),
        //             allowClear: Boolean($(this).data('allow-clear')),
        //         });
        //     });
        // });


        $.fn.select2.defaults.set("theme", "bootstrap");
        $(".select2_multi").select2({
            width: null
        })
        /////////////

            $( document ).ready(function() {

                var a = Math.floor(100000 + Math.random() * 900000);
                a = String(a);
                a = a.substring(0,4);
                // alert( "valor:" +a );

                document.getElementById("transactionId").innerHTML = "Your Transation Code :"+a;

            });

        ////////////
      


    </script>

</section>

</body>
</html>